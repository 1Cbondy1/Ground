<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Project 1</title>
  <!-- Styling -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="../css/reset.css">
  <!-- Materialize CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <!-- Custom Styling -->
  <link rel="stylesheet" type="text/css" href="../css/style.css">

</head>
<body>
    <!-- Navbar -->
  <nav>
      <div class="container">
        <div class="nav-wrapper">
          <a href="#!" class="brand-logo">Donate</a>
          <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
          <ul class="right hide-on-med-and-down">
            <li><a href="index.html">Home</a></li>
            <li><a href="donate.html">Donate</a></li>
            <li><a href="pickup.html">Pick-up</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- Sidenav menu -->
    <ul class="sidenav" id="mobile-demo">
      <div class="sidenav-header">
        <h3>Ground</h3>
      </div>
      <li><a href="index.html"><i class="material-icons">home</i>Home</a></li>
      <li><a href="donate.html"><i class="material-icons">place</i>Donate</a></li>
      <li><a href="pickup.html"><i class="material-icons">directions_car</i>Pick-up</a></li>
      <li><div class="divider"></div></li>
      <!-- <li><a href="collapsible.html">Settings</a></li> -->
    </ul>

    <!-- Main content -->
    <div class="container">
      <div class="row">
        <p id="text-info-search">What is the name of your business?</p>
      </div>
      <div class="row">
        <nav id="nav-search">
          <div class="container nav-wrapper">
            <form> 
              <div class="input-field">
                <input id="search-business" type="search" required>
                <label class="label-icon" for="search-business">
                  <i class="material-icons">search</i>
                </label>
                <i class="material-icons">close</i>
              </div>
            </form>
          </div>
        </nav>
      </div>
      <div id="text-info-search" class="row">
        <p id="results">Results appear here...</p>
      </div>

    </div>


  </body>

  <!-- jQuery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <!-- Materialize JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <!-- Firebase Reference -->
  <script src="https://www.gstatic.com/firebasejs/4.12.0/firebase.js"></script>
  <script type="text/javascript">

  $(document).ready(function(){
    $('.sidenav').sidenav();
  });

  var business = "Coffee";
  
  var myurl = "https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?location=austin&limit=3&term=" + business;
        $.ajax({
            url: myurl,
            headers: {
            'Authorization':'Bearer Uensef7YvWBDrkLIVTvHbF1RPf2IN989gIxMN9HEvEV8VyXjp4TZ_V8faI3tItTCrIheVIeD-XjS78gcmrmtJ9I0MvJ1kEjU6x1KzdaiUzynr8rMEwSVs9WUlrXlW3Yx',
        },
            method: 'GET',
            dataType: 'json',
            success: function(data){
                var totalresults = data.total;
                if (totalresults > 0){
                    $.each(data.businesses, function(i, item) {
                        var id = "text-results";
                        var phone = item.display_phone;
                        var name = item.name;
                        var address = item.location.address1;
                        var city = item.location.city;
                        var state = item.location.state;
                        var zipcode = item.location.zip_code;
                        var businessInfo = ('<p id="' + id + '" style="margin-top:10px;margin-bottom:10px;"><b>' + name + '</b><br>' + address + ' ' + city + ', ' + state + ' ' + zipcode + '<br>' + phone + '</p>');
                        $('#results').append(businessInfo);
                    });
                } else {
                    $('#results').append('<h5>We discovered no results!</h5>');
                }
            }
        });


  </script>
</html>
